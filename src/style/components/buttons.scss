$btn-normal-height: base-spacing(5);
$btn-normal-padding: base-spacing(2);
$btn-normal-min-width: base-spacing(10);
$btn-small-height: base-spacing(3);
$btn-small-padding: base-spacing(2);
$btn-small-min-width: base-spacing(5);

$btn-primary-bg-color: $smartdok-yellow;
$btn-primary-fg-color: $almost-black;
$btn-normal-bg-color: rgba(0, 0, 0, 0.02);
$btn-normal-fg-color: $almost-black;
$btn-normal-border-color: $gray;
$btn-danger-bg-color: $btn-normal-bg-color;
$btn-danger-fg-color: $color-bad;
$btn-danger-border-color: $color-bad;

// Implements keyboard-only focus styling,
// https://stackoverflow.com/a/45191208/137627

@mixin btn-overlay() {
  :after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: ($btn-normal-height / 2);

    @content;
  }
};

.s-button {
  background: none;
  border: none;
  outline: none;
  font-size: inherit;
  padding: 0;
  position: relative;

  height: $btn-normal-height;
  border-radius: ($btn-normal-height / 2);
  min-width: $btn-normal-min-width;

  &--small {
    height: $btn-small-height;
    min-width: $btn-small-min-width;

    > .s-button__content {
      padding: 0 $btn-small-padding;
    }
  }

  &:not(.s-button--inactive):hover {
    @include btn-overlay {
      background-color: rgba(255, 255, 255, .1);
    }
  }

  &:not(.s-button--inactive):active {
    @include btn-overlay {
      background-color: rgba(0, 0, 0, .1);
    }
  }

  &--normal {
    background-color: $btn-normal-bg-color;
    color: $btn-normal-fg-color;

    // Implement the border as a pseudo-element, to prevent the content
    // from moving when the border thickness is changed due to tab selection.
    @include btn-overlay {
      border: 1px solid $btn-normal-border-color;
    }
  }

  &--primary {
    border: none;
    background-color: $btn-primary-bg-color;
    color: $btn-primary-fg-color;
  }

  &--danger {
    background-color: $btn-danger-bg-color;
    color: $btn-danger-fg-color;

    // Implement the border as a pseudo-element, to prevent the content
    // from moving when the border thickness is changed due to tab selection.
    @include btn-overlay {
      border: 1px solid $btn-danger-border-color;
    }
  }

  &--inactive {
    border: none;

    background-color: $gray;
    color: $grayer;
  }
}

.s-button__content {
  @include action-font;

  display: inline-flex;
  align-items: center;
  justify-content: center;

  height: 100%;
  width: 100%;
  padding: 0 $btn-normal-padding;
  outline: none;
  user-select: none;
  cursor: default;

}

.s-button:focus {
  @include btn-overlay {
    border: .125rem solid $color-edit;
  }
}
